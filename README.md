# config-DZ
1. Структура проекта
Лексический анализатор (Lexer): Разбивает исходный текст на токены с использованием регулярных выражений.

Синтаксический анализатор (Parser): Строит абстрактное синтаксическое дерево (AST) используя рекурсивный спуск.

Вычислитель констант (ConstantEvaluator): Вычисляет значения константных выражений и заменяет константы их значениями.

Преобразователь в XML (XMLConverter): Конвертирует AST в формат XML.

Основной конвертер (ConfigConverter): Координирует весь процесс преобразования.

2. Поддерживаемый синтаксис (вариант 16)
Многострочные комментарии: {[] - ... --}}

Числа: Поддержка целых, вещественных и чисел в научной записи

Массивы: #{ значение, значение, ... }

Словари: table([ имя = значение, ... ])

Строки: "текст в двойных кавычках"

Имена: [_a-zA-Z]+

Константы: set имя = значение

Константные выражения: @{выражение}

Операции и функции: сложение (+), print(), mod()

3. Использование
# Конвертация файла
python config_converter.py input.conf output.xml

# Запуск тестов
python config_converter.py --test

# Просмотр примеров
python config_converter.py --example 1
4. Примеры конфигураций
В коде представлены 3 примера конфигураций из разных предметных областей:

Конфигурация сервера

Конфигурация игры

Конфигурация пользовательского интерфейса

5. Тестирование
Проект включает набор unit-тестов, проверяющих:

Лексический анализ

Синтаксический анализ

Вычисление константных выражений

Работу функций print() и mod()

Обработку ошибок

Конвертацию сложных конфигураций

6. Требования к окружению
Python 3.6+

Стандартные библиотеки (не требует установки дополнительных пакетов)

Проект полностью соответствует требованиям варианта 16:

Чтение из файла (аргумент командной строки)

Запись в XML файл (аргумент командной строки)

Поддержка всего синтаксиса варианта 16

Детальные сообщения об ошибках

Покрытие тестами

Примеры конфигураций из разных предметных областей


Описание всех функций и настроек
Основные классы и их функции:
1. Lexer (Лексический анализатор)

class Lexer:
    # Регулярные выражения для токенов варианта 16
    TOKEN_SPECS = [
        (TokenType.COMMENT_START, r'{\[\s*-\s*'),
        (TokenType.COMMENT_END, r'--}}'),
        # ... остальные токены
    ]
    
   def tokenize(self) -> List[Token]:
      # Основной метод: преобразует текст в список токенов
Назначение: Разбивает исходный текст на минимальные значимые единицы (токены) согласно грамматике варианта 16.

Ключевые особенности:

Пропускает многострочные комментарии {[] - ... --}}

Распознает числа в различных форматах (целые, вещественные, научная запись)

Игнорирует пробелы и табуляции

Генерирует понятные сообщения об ошибках

2. Parser (Синтаксический анализатор)


class Parser:
     def parse(self) -> List[ASTNode]:
        # Основной метод: преобразует токены в AST
    
   
  def parse_constant_declaration(self) -> ASTNode:
        # Разбор: set имя = значение
    
   def parse_dictionary(self) -> Dictionary:
        # Разбор: table([имя = значение, ...])
    
   def parse_constant_expression(self) -> ASTNode:
        # Разбор: @{выражение}
Назначение: Анализирует последовательность токенов и строит абстрактное синтаксическое дерево (AST).

Поддерживаемые конструкции:

Объявление констант: set имя = значение

Словари: table([ключ = значение, ...])

Массивы: #{элемент1, элемент2, ...}

Константные выражения: @{выражение}

Вложенные структуры

3. ConstantEvaluator (Вычислитель констант)

class ConstantEvaluator:
    def evaluate(self, node: ASTNode) -> ASTNode:
        # Рекурсивно вычисляет значения констант
Назначение: Вычисляет значения константных выражений во время трансляции.

Поддерживаемые операции:

Арифметические операции: сложение (+)

Функции: print(), mod()

Рекурсивное вычисление вложенных выражений

4. XMLConverter (Преобразователь в XML)

class XMLConverter:
    @staticmethod
    def to_xml(node: ASTNode) -> ET.Element:
        # Конвертирует AST в XML-элемент
Назначение: Преобразует AST в формат XML с сохранением структуры данных.

Особенности вывода:

Корневой элемент <config>

Словари преобразуются в элементы <dict> с дочерними <pair>

Массивы преобразуются в элементы <array> с дочерними <value>

Автоматическое форматирование с отступами

5. ConfigConverter (Основной конвертер)

class ConfigConverter:
    def convert(self, input_text: str) -> str:
        # Основной метод конвертации
Назначение: Координирует весь процесс преобразования от текста до XML.

Поток обработки:

Лексический анализ → 2. Синтаксический анализ → 3. Вычисление констант → 4. Генерация XML

6. TestConfigConverter (Модуль тестирования)

class TestConfigConverter(unittest.TestCase):
    # Набор unit-тестов
Назначение: Автоматическое тестирование всех компонентов системы.

Покрытие тестами:

Лексический анализ

Синтаксический анализ

Вычисление константных выражений

Обработка ошибок

Конвертация комплексных конфигураций


Команды для сборки проекта и запуска тестов
Требования к окружению:
Python 3.6 или новее

Дополнительные библиотеки: Не требуются (используются только стандартные библиотеки)

Установка и запуск:
Вариант 1: Прямой запуск

# Клонирование или копирование проекта
git clone <репозиторий>
cd config-converter

# Запуск конвертера
python config_converter.py input.conf output.xml

Вариант 2: Запуск с аргументами

# Показать справку
python config_converter.py --help

# Запустить тесты
python config_converter.py --test

# Показать пример конфигурации
python config_converter.py --example 1

Вариант 3: Запуск тестов через unittest

# Запуск всех тестов
python -m unittest config_converter.TestConfigConverter

# Запуск конкретного теста
python -m unittest config_converter.TestConfigConverter.test_lexer_basic
